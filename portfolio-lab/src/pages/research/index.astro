---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

const allResearch = await getCollection('research');
// Sort by date
const sortedResearch = allResearch.sort((a, b) => 
  new Date(b.data.date).valueOf() - new Date(a.data.date).valueOf()
);
---

<BaseLayout title="Research Lab">
  
  <div class="mb-16 pt-10 animate-fade-in relative z-20">
    <div class="mb-6 font-mono text-xs text-secondary tracking-wider">
      /// LAB_ARCHIVE
    </div>
    <h1 class="font-serif text-5xl mb-4 text-primary">Research Lab</h1>
    <p class="text-secondary text-lg max-w-xl leading-relaxed mb-8">
      A collection of academic papers, technical reports, and deep dives into robotics and control theory.
    </p>
  </div>

  <div class="grid grid-cols-1 gap-6 animate-slide-up relative z-10" style="animation-delay: 0.1s;">
    {sortedResearch.map((paper) => (
      <a href={`/research/${paper.slug}`} class="group block bg-surface border border-border rounded-2xl p-8 hover:-translate-y-1 hover:border-secondary hover:bg-surface-hover transition-all duration-200">
        <div class="flex justify-between mb-4">
          <span class="font-mono text-xs uppercase border border-border px-2 py-1 rounded text-secondary group-hover:border-secondary transition-colors">PAPER</span>
          <span class="font-mono text-xs text-secondary">
            {paper.data.date}
          </span>
        </div>
        
        <h3 class="font-serif text-2xl mb-3 text-primary">{paper.data.title}</h3>
        <p class="text-secondary text-sm mb-6 leading-relaxed">{paper.data.description}</p>
        
        <div class="flex flex-wrap gap-2 font-mono text-xs text-secondary opacity-70">
          {paper.data.tags.map(tag => <span>#{tag}</span>)}
        </div>
      </a>
    ))}
  </div>

</BaseLayout>
